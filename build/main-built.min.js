/*! Sortable 1.7.0 - MIT | git://github.com/rubaxa/Sortable.git */define("utils",[],function(){let a=function(b,c){return c.tagName===b?c:a(b,c.parentElement)},b=function(a,c,d="*"){return a.classList.contains(c)&&("*"===d||d===a.tagName)?a:b(a.parentElement,c,d)};return{getParent:a,getParentWithClass:b}}),define("collapsible",["utils"],function(a){return function(b="collapsible-controller",c="collapsed"){let d=function(a){let b=document.querySelectorAll(a);return 0===b.length?void console.error("Empty target list for selector \""+a+"\"."):b},e=function(a){let b=d(a);return 0!=b.length&&"true"===(b[0].dataset.collapsed+"").toLowerCase()},f=function(e){e.preventDefault();let f=a.getParentWithClass(e.target,b),h=d(f.dataset.collapse);for(let a=0;a<h.length;++a)h[a].classList.toggle(c),h[a].dataset.collapsed=h[a].classList.contains(c);g(f.dataset.activeclass,f.dataset.activetarget||"this",f)},g=function(a,b,c){let f=[],g=e(c.dataset.collapse);if(c.setAttribute("aria-pressed",g),void 0!==c.dataset.saveas&&0!==c.dataset.saveas.length&&sessionStorage.setItem(c.dataset.saveas,g.toString()),void 0!==a&&0!=c.dataset.activeclass.length){0==b.length||"this"===b?f[0]=c:f=d(b);for(let b=0;b<f.length;++b)g?f[b].classList.add(a):f[b].classList.remove(a)}},h=function(a,b){let e=d(b),f=!1;a.dataset.saveas!==void 0&&0!==a.dataset.saveas.length&&(f="true"===(sessionStorage.getItem(a.dataset.saveas)||"").toLowerCase());for(let d=0;d<e.length;++d)"true"===(e[d].dataset.collapsed+"").toLowerCase()||f?e[d].classList.add(c):e[d].classList.remove(c)},j=function(a){return void 0===a.dataset.collapse?void console.warn("Element has collapsible controller class but doesn't have a collapse target.",a):void(a.addEventListener("click",f),h(a,a.dataset.collapse))};return{startup:function(){let a=document.getElementsByClassName(b);for(let b=0;b<a.length;++b)j(a[b])},unload:function(){let a=document.getElementsByClassName(b);for(let b=0;b<a.length;++b)a[b].removeEventListener("click",f)},applyTo:j}}}),!function(a){"use strict";"function"==typeof define&&define.amd?define("../dist/js/Sortable.min",a):"undefined"!=typeof module&&void 0!==module.exports?module.exports=a():window.Sortable=a()}(function(){"use strict";function aa(a,b){if(!a||!a.nodeType||1!==a.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(a);this.el=a,this.options=b=ea({},b),a[T]=this;var c={group:null,sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(a.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",dragClass:"sortable-drag",ignore:"a, img",filter:null,preventOnFilter:!0,animation:0,setData:function(a,b){a.setData("Text",b.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1,fallbackTolerance:0,fallbackOffset:{x:0,y:0},supportPointer:!1!==aa.supportPointer};for(var d in c)d in b||(b[d]=c[d]);for(var f in F(b),this)"_"===f.charAt(0)&&"function"==typeof this[f]&&(this[f]=this[f].bind(this));this.nativeDraggable=!b.forceFallback&&S,U(a,"mousedown",this._onTapStart),U(a,"touchstart",this._onTapStart),b.supportPointer&&U(a,"pointerdown",this._onTapStart),this.nativeDraggable&&(U(a,"dragover",this),U(a,"dragenter",this)),A.push(this._onDragOver),b.store&&this.sort(b.store.get(this))}function W(a,b){"clone"!==a.lastPullMode&&(b=!0),la&&la.state!==b&&(z(la,"display",b?"none":""),b||la.state&&(a.options.group.revertClone?(ma.insertBefore(la,na),a._animate(ia,la)):ma.insertBefore(la,ia)),la.state=b)}function j(a,b,c){if(a){c=c||C;do if(">*"===b&&a.parentNode===c||ca(a,b))return a;while((a=(e=(d=a).host)&&e.nodeType?e:d.parentNode))}var d,e;return null}function U(a,b,c){a.addEventListener(b,c,B)}function V(a,b,c){a.removeEventListener(b,c,B)}function q(a,b,c){if(a)if(a.classList)a.classList[c?"add":"remove"](b);else{var d=(" "+a.className+" ").replace(y," ").replace(" "+b+" "," ");a.className=(d+(c?" "+b:"")).replace(y," ")}}function z(a,b,c){var d=a&&a.style;if(d){if(void 0===c)return C.defaultView&&C.defaultView.getComputedStyle?c=C.defaultView.getComputedStyle(a,""):a.currentStyle&&(c=a.currentStyle),void 0===b?c:c[b];b in d||(b="-webkit-"+b),d[b]=c+("string"==typeof c?"":"px")}}function G(a,b,c){if(a){var d=a.getElementsByTagName(b),e=0,f=d.length;if(c)for(;e<f;e++)c(d[e],e);return d}return[]}function Q(b,f,e,g,i,j,a,k,l){b=b||f[T];var c=C.createEvent("Event"),d=b.options,h="on"+e.charAt(0).toUpperCase()+e.substr(1);c.initEvent(e,!0,!0),c.to=i||f,c.from=j||f,c.item=g||f,c.clone=la,c.oldIndex=a,c.newIndex=k,c.originalEvent=l,f.dispatchEvent(c),d[h]&&d[h].call(b,c)}function Z(b,f,e,g,j,i,k,a){var l,m,n=b[T],d=n.options.onMove;return(l=C.createEvent("Event")).initEvent("move",!0,!0),l.to=f,l.from=b,l.dragged=e,l.draggedRect=g,l.related=j||f,l.relatedRect=i||f.getBoundingClientRect(),l.willInsertAfter=a,l.originalEvent=k,b.dispatchEvent(l),d&&(m=d.call(n,l,k)),m}function J(a){a.draggable=!1}function K(){Fa=!1}function $(a){for(var b=a.tagName+a.className+a.src+a.href+a.textContent,c=b.length,d=0;c--;)d+=b.charCodeAt(c);return d.toString(36)}function ba(a,b){var c=0;if(!a||!a.parentNode)return-1;for(;a&&(a=a.previousElementSibling);)"TEMPLATE"!==a.nodeName.toUpperCase()&&(">*"===b||ca(a,b))&&c++;return c}function ca(a,b){if(a){if(a.matches)return a.matches(b);if(a.msMatchesSelector)return a.msMatchesSelector(b)}return!1}function da(a,b){var c,d;return function(){void 0===c&&(c=arguments,d=this,x(function(){1===c.length?a.call(d,c[0]):a.apply(d,c),c=void 0},b))}}function ea(a,b){if(a&&b)for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function fa(a){return N&&N.dom?N.dom(a).cloneNode(!0):k?k(a).clone(!0)[0]:a.cloneNode(!0)}function ga(a){return x(a,0)}function ha(a){return clearTimeout(a)}if("undefined"==typeof window||!window.document)return function(){throw new Error("Sortable.js requires a window with a document")};var ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa,Ba,Ca,Da={},y=/\s+/g,Ea=/left|right|inline/,T="Sortable"+new Date().getTime(),w=window,C=w.document,E=w.parseInt,x=w.setTimeout,k=w.jQuery||w.Zepto,N=w.Polymer,B=!1,S="draggable"in C.createElement("div"),Y=!navigator.userAgent.match(/(?:Trident.*rv[ :]?11\.|msie)/i)&&((Ca=C.createElement("x")).style.cssText="pointer-events:auto","auto"===Ca.style.pointerEvents),Fa=!1,X=Math.abs,I=Math.min,M=[],A=[],R=function(){return!1},Ga=da(function(c,j,e){if(e&&j.scroll){var k,l,n,q,s,t,x=e[T],u=j.scrollSensitivity,f=j.scrollSpeed,p=c.clientX,g=c.clientY,v=window.innerWidth,m=window.innerHeight;if(qa!==e&&(pa=j.scroll,qa=e,ra=j.scrollFn,!0===pa)){pa=e;do if(pa.offsetWidth<pa.scrollWidth||pa.offsetHeight<pa.scrollHeight)break;while(pa=pa.parentNode)}pa&&(k=pa,l=pa.getBoundingClientRect(),n=(X(l.right-p)<=u)-(X(l.left-p)<=u),q=(X(l.bottom-g)<=u)-(X(l.top-g)<=u)),n||q||(q=(m-g<=u)-(g<=u),((n=(v-p<=u)-(p<=u))||q)&&(k=w)),Da.vx===n&&Da.vy===q&&Da.el===k||(Da.el=k,Da.vx=n,Da.vy=q,clearInterval(Da.pid),k&&(Da.pid=setInterval(function(){t=q?q*f:0,s=n?n*f:0,"function"==typeof ra&&"continue"!==ra.call(x,s,t,c,Aa,k)||(k===w?w.scrollTo(w.pageXOffset+s,w.pageYOffset+t):(k.scrollTop+=t,k.scrollLeft+=s))},24)))}},30),F=function(a){function b(a,b){return null!=a&&!0!==a||null!=(a=c.name)?"function"==typeof a?a:function(c,d){var e=d.options.group.name;return b?a:a&&(a.join?-1<a.indexOf(e):e==a)}:R}var c={},d=a.group;d&&"object"==typeof d||(d={name:d}),c.name=d.name,c.checkPull=b(d.pull,!0),c.checkPut=b(d.put),c.revertClone=d.revertClone,a.group=c};try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){B={capture:!1,passive:!1}}}))}catch(a){}return aa.prototype={constructor:aa,_onTapStart:function(a){var b,e=this,f=this.el,g=this.options,i=g.preventOnFilter,k=a.type,l=a.touches&&a.touches[0],c=(l||a).target,m=a.target.shadowRoot&&a.path&&a.path[0]||c,h=g.filter;if(function(a){M.length=0;for(var b=a.getElementsByTagName("input"),c=b.length;c--;){var d=b[c];d.checked&&M.push(d)}}(f),!ia&&!(/mousedown|pointerdown/.test(k)&&0!==a.button||g.disabled)&&!m.isContentEditable&&(c=j(c,g.draggable,f))&&oa!==c){if(b=ba(c,g.draggable),"function"==typeof h){if(h.call(this,a,c,this))return Q(e,m,"filter",c,f,f,b),void(i&&a.preventDefault());}else if(h&&(h=h.split(",").some(function(a){if(a=j(m,a.trim(),f))return Q(e,a,"filter",c,f,f,b),!0})))return void(i&&a.preventDefault());g.handle&&!j(m,g.handle,f)||this._prepareDragStart(a,l,c,b)}},_prepareDragStart:function(a,b,e,f){var g,i=this,d=i.el,h=i.options,j=d.ownerDocument;e&&!ia&&e.parentNode===d&&(za=a,ma=d,ja=(ia=e).parentNode,na=ia.nextSibling,oa=e,xa=h.group,va=f,this._lastX=(b||a).clientX,this._lastY=(b||a).clientY,ia.style["will-change"]="all",g=function(){i._disableDelayedDrag(),ia.draggable=i.nativeDraggable,q(ia,h.chosenClass,!0),i._triggerDragStart(a,b),Q(i,ma,"choose",ia,ma,ma,va)},h.ignore.split(",").forEach(function(a){G(ia,a.trim(),J)}),U(j,"mouseup",i._onDrop),U(j,"touchend",i._onDrop),U(j,"touchcancel",i._onDrop),U(j,"selectstart",i),h.supportPointer&&U(j,"pointercancel",i._onDrop),h.delay?(U(j,"mouseup",i._disableDelayedDrag),U(j,"touchend",i._disableDelayedDrag),U(j,"touchcancel",i._disableDelayedDrag),U(j,"mousemove",i._disableDelayedDrag),U(j,"touchmove",i._disableDelayedDrag),h.supportPointer&&U(j,"pointermove",i._disableDelayedDrag),i._dragStartTimer=x(g,h.delay)):g())},_disableDelayedDrag:function(){var a=this.el.ownerDocument;clearTimeout(this._dragStartTimer),V(a,"mouseup",this._disableDelayedDrag),V(a,"touchend",this._disableDelayedDrag),V(a,"touchcancel",this._disableDelayedDrag),V(a,"mousemove",this._disableDelayedDrag),V(a,"touchmove",this._disableDelayedDrag),V(a,"pointermove",this._disableDelayedDrag)},_triggerDragStart:function(a,b){(b=b||("touch"==a.pointerType?a:null))?(za={target:ia,clientX:b.clientX,clientY:b.clientY},this._onDragStart(za,"touch")):this.nativeDraggable?(U(ia,"dragend",this),U(ma,"dragstart",this._onDragStart)):this._onDragStart(za,!0);try{C.selection?ga(function(){C.selection.empty()}):window.getSelection().removeAllRanges()}catch(a){}},_dragStarted:function(){if(ma&&ia){var a=this.options;q(ia,a.ghostClass,!0),q(ia,a.dragClass,!1),aa.active=this,Q(this,ma,"start",ia,ma,ma,va)}else this._nulling()},_emulateDragOver:function(){if(Aa){if(this._lastX===Aa.clientX&&this._lastY===Aa.clientY)return;this._lastX=Aa.clientX,this._lastY=Aa.clientY,Y||z(ka,"display","none");var a=C.elementFromPoint(Aa.clientX,Aa.clientY),b=a,c=A.length;if(a&&a.shadowRoot&&(b=a=a.shadowRoot.elementFromPoint(Aa.clientX,Aa.clientY)),b)do{if(b[T]){for(;c--;)A[c]({clientX:Aa.clientX,clientY:Aa.clientY,target:a,rootEl:b});break}a=b}while(b=b.parentNode);Y||z(ka,"display","")}},_onTouchMove:function(b){if(za){var c=this.options,d=c.fallbackTolerance,e=c.fallbackOffset,f=b.touches?b.touches[0]:b,g=f.clientX-za.clientX+e.x,a=f.clientY-za.clientY+e.y,h=b.touches?"translate3d("+g+"px,"+a+"px,0)":"translate("+g+"px,"+a+"px)";if(!aa.active){if(d&&I(X(f.clientX-this._lastX),X(f.clientY-this._lastY))<d)return;this._dragStarted()}this._appendGhost(),Ba=!0,Aa=f,z(ka,"webkitTransform",h),z(ka,"mozTransform",h),z(ka,"msTransform",h),z(ka,"transform",h),b.preventDefault()}},_appendGhost:function(){if(!ka){var b,c=ia.getBoundingClientRect(),d=z(ia),f=this.options;q(ka=ia.cloneNode(!0),f.ghostClass,!1),q(ka,f.fallbackClass,!0),q(ka,f.dragClass,!0),z(ka,"top",c.top-E(d.marginTop,10)),z(ka,"left",c.left-E(d.marginLeft,10)),z(ka,"width",c.width),z(ka,"height",c.height),z(ka,"opacity","0.8"),z(ka,"position","fixed"),z(ka,"zIndex","100000"),z(ka,"pointerEvents","none"),f.fallbackOnBody&&C.body.appendChild(ka)||ma.appendChild(ka),b=ka.getBoundingClientRect(),z(ka,"width",2*c.width-b.width),z(ka,"height",2*c.height-b.height)}},_onDragStart:function(b,c){var d=this,e=b.dataTransfer,a=d.options;d._offUpEvents(),xa.checkPull(d,d,ia,b)&&((la=fa(ia)).draggable=!1,la.style["will-change"]="",z(la,"display","none"),q(la,d.options.chosenClass,!1),d._cloneId=ga(function(){ma.insertBefore(la,ia),Q(d,ma,"clone",ia)})),q(ia,a.dragClass,!0),c?("touch"===c?(U(C,"touchmove",d._onTouchMove),U(C,"touchend",d._onDrop),U(C,"touchcancel",d._onDrop),a.supportPointer&&(U(C,"pointermove",d._onTouchMove),U(C,"pointerup",d._onDrop))):(U(C,"mousemove",d._onTouchMove),U(C,"mouseup",d._onDrop)),d._loopId=setInterval(d._emulateDragOver,50)):(e&&(e.effectAllowed="move",a.setData&&a.setData.call(d,e,ia)),U(C,"drop",d),d._dragStartId=ga(d._dragStarted))},_onDragOver:function(b){var a,d,e,g,h,i,k=this.el,n=this.options,o=n.group,q=aa.active,r=xa===o,t=!1,u=n.sort;if((void 0!==b.preventDefault&&(b.preventDefault(),!n.dragoverBubble&&b.stopPropagation()),!ia.animated)&&(Ba=!0,q&&!n.disabled&&(r?u||(g=!ma.contains(ia)):ya===this||(q.lastPullMode=xa.checkPull(this,q,ia,b))&&o.checkPut(this,q,ia,b))&&(void 0===b.rootEl||b.rootEl===this.el))){if(Ga(b,n,this.el),Fa)return;if(a=j(b.target,n.draggable,k),d=ia.getBoundingClientRect(),ya!==this&&(ya=this,t=!0),g)return W(q,!0),ja=ma,void(la||na?ma.insertBefore(ia,la||na):u||ma.appendChild(ia));if(0===k.children.length||k.children[0]===ka||k===b.target&&(h=b,i=k.lastElementChild.getBoundingClientRect(),5<h.clientY-(i.top+i.height)||5<h.clientX-(i.left+i.width))){if(0!==k.children.length&&k.children[0]!==ka&&k===b.target&&(a=k.lastElementChild),a){if(a.animated)return;e=a.getBoundingClientRect()}W(q,r),!1!==Z(ma,k,ia,d,a,e,b)&&(ia.contains(k)||(k.appendChild(ia),ja=k),this._animate(d,ia),a&&this._animate(e,a))}else if(a&&!a.animated&&a!==ia&&void 0!==a.parentNode[T]){sa!==a&&(sa=a,ta=z(a),ua=z(a.parentNode));var v=(e=a.getBoundingClientRect()).right-e.left,w=e.bottom-e.top,y=Ea.test(ta.cssFloat+ta.display)||"flex"==ua.display&&0===ua["flex-direction"].indexOf("row"),B=a.offsetWidth>ia.offsetWidth,C=a.offsetHeight>ia.offsetHeight,D=.5<(y?(b.clientX-e.left)/v:(b.clientY-e.top)/w),F=a.nextElementSibling,G=!1;if(y){var I=ia.offsetTop,J=a.offsetTop;G=I===J?a.previousElementSibling===ia&&!B||D&&B:a.previousElementSibling===ia||ia.previousElementSibling===a?.5<(b.clientY-e.top)/w:J>I}else t||(G=F!==ia&&!C||D&&C);var L=Z(ma,k,ia,d,a,e,b,G);!1!==L&&(1!==L&&-1!==L||(G=1===L),Fa=!0,x(K,30),W(q,r),ia.contains(k)||(G&&!F?k.appendChild(ia):a.parentNode.insertBefore(ia,G?F:a)),ja=ia.parentNode,this._animate(d,ia),this._animate(e,a))}}},_animate:function(a,b){var c=this.options.animation;if(c){var d=b.getBoundingClientRect();1===a.nodeType&&(a=a.getBoundingClientRect()),z(b,"transition","none"),z(b,"transform","translate3d("+(a.left-d.left)+"px,"+(a.top-d.top)+"px,0)"),b.offsetWidth,z(b,"transition","all "+c+"ms"),z(b,"transform","translate3d(0,0,0)"),clearTimeout(b.animated),b.animated=x(function(){z(b,"transition",""),z(b,"transform",""),b.animated=!1},c)}},_offUpEvents:function(){var a=this.el.ownerDocument;V(C,"touchmove",this._onTouchMove),V(C,"pointermove",this._onTouchMove),V(a,"mouseup",this._onDrop),V(a,"touchend",this._onDrop),V(a,"pointerup",this._onDrop),V(a,"touchcancel",this._onDrop),V(a,"pointercancel",this._onDrop),V(a,"selectstart",this)},_onDrop:function(b){var a=this.el,c=this.options;clearInterval(this._loopId),clearInterval(Da.pid),clearTimeout(this._dragStartTimer),ha(this._cloneId),ha(this._dragStartId),V(C,"mouseover",this),V(C,"mousemove",this._onTouchMove),this.nativeDraggable&&(V(C,"drop",this),V(a,"dragstart",this._onDragStart)),this._offUpEvents(),b&&(Ba&&(b.preventDefault(),!c.dropBubble&&b.stopPropagation()),ka&&ka.parentNode&&ka.parentNode.removeChild(ka),ma!==ja&&"clone"===aa.active.lastPullMode||la&&la.parentNode&&la.parentNode.removeChild(la),ia&&(this.nativeDraggable&&V(ia,"dragend",this),J(ia),ia.style["will-change"]="",q(ia,this.options.ghostClass,!1),q(ia,this.options.chosenClass,!1),Q(this,ma,"unchoose",ia,ja,ma,va,null,b),ma===ja?ia.nextSibling!==na&&0<=(wa=ba(ia,c.draggable))&&(Q(this,ma,"update",ia,ja,ma,va,wa,b),Q(this,ma,"sort",ia,ja,ma,va,wa,b)):0<=(wa=ba(ia,c.draggable))&&(Q(null,ja,"add",ia,ja,ma,va,wa,b),Q(this,ma,"remove",ia,ja,ma,va,wa,b),Q(null,ja,"sort",ia,ja,ma,va,wa,b),Q(this,ma,"sort",ia,ja,ma,va,wa,b)),aa.active&&(null!=wa&&-1!==wa||(wa=va),Q(this,ma,"end",ia,ja,ma,va,wa,b),this.save()))),this._nulling()},_nulling:function(){ma=ia=ja=ka=na=la=oa=pa=qa=za=Aa=Ba=wa=sa=ta=ya=xa=aa.active=null,M.forEach(function(a){a.checked=!0}),M.length=0},handleEvent:function(a){switch(a.type){case"drop":case"dragend":this._onDrop(a);break;case"dragover":case"dragenter":ia&&(this._onDragOver(a),function(a){a.dataTransfer&&(a.dataTransfer.dropEffect="move"),a.preventDefault()}(a));break;case"mouseover":this._onDrop(a);break;case"selectstart":a.preventDefault();}},toArray:function(){for(var a,b=[],c=this.el.children,d=0,e=c.length,f=this.options;d<e;d++)j(a=c[d],f.draggable,this.el)&&b.push(a.getAttribute(f.dataIdAttr)||$(a));return b},sort:function(a){var b={},c=this.el;this.toArray().forEach(function(a,d){var e=c.children[d];j(e,this.options.draggable,c)&&(b[a]=e)},this),a.forEach(function(a){b[a]&&(c.removeChild(b[a]),c.appendChild(b[a]))})},save:function(){var a=this.options.store;a&&a.set(this)},closest:function(a,b){return j(a,b||this.options.draggable,this.el)},option:function(a,b){var c=this.options;return void 0===b?c[a]:void(c[a]=b,"group"===a&&F(c))},destroy:function(){var a=this.el;a[T]=null,V(a,"mousedown",this._onTapStart),V(a,"touchstart",this._onTapStart),V(a,"pointerdown",this._onTapStart),this.nativeDraggable&&(V(a,"dragover",this),V(a,"dragenter",this)),Array.prototype.forEach.call(a.querySelectorAll("[draggable]"),function(a){a.removeAttribute("draggable")}),A.splice(A.indexOf(this._onDragOver),1),this._onDrop(),this.el=a=null}},U(C,"touchmove",function(a){aa.active&&a.preventDefault()}),aa.utils={on:U,off:V,css:z,find:G,is:function(a,b){return!!j(a,b,a)},extend:ea,throttle:da,closest:j,toggleClass:q,clone:fa,index:ba,nextTick:ga,cancelNextTick:ha},aa.create=function(a,b){return new aa(a,b)},aa.version="1.7.0",aa}),define("sortable",["../dist/js/Sortable.min","utils"],function(a){return function(b){let c=null,d=function(){c.destroy()};return{startup:function(){c=a.create(b,{handle:".button--drag",draggable:"tr:not(.list-table__entry--new-todo)",animation:150,onUpdate:function(a){let b=new CustomEvent("sortableUpdate");a.target.dispatchEvent(b)}})},remove:d}}}),define("todo",["utils","sortable"],function(a,b){return function(c,d,e,f,g,h,i){const j=!0,k=2,l="Will be moved to archive in ",m=" seconds.";let n=[],o=[],p=b(d),q=b(e),r=function(a,b){let c=b.content.cloneNode(!0);return c.querySelector("input").value=a,c.querySelector("tr")},s=function(b,c,e){e||(e=new Date);let g=r(b,f);g.dataset.todoid=n.length,n[n.length]={text:b,creationDate:e};let h=g.querySelector("input");h.id="todoEntry"+g.dataset.todoid,h.addEventListener("change",x);let i=g.querySelector("label");i.setAttribute("for",h.id),i.innerText+=parseInt(g.dataset.todoid)+1;let j=g.querySelector(".button--check");j.addEventListener("click",y),j.addEventListener("touchend",y),d.insertBefore(g,a.getParent("TR",c))},t=function(a,b,c){c||(c=new Date);let d=r(a,g);d.dataset.archiveid=o.length,o[o.length]={text:a,creationDate:b,finishedDate:c};let f=d.querySelector("input");f.readOnly=!0,f.id="archiveEntry"+d.dataset.archiveid;let h=d.querySelector("label");h.setAttribute("for",f.id),h.innerText+=parseInt(d.dataset.archiveid)+1,d.querySelector("label").setAttribute("for",f.id),d.querySelector(".button--remove").addEventListener("click",u),e.appendChild(d)},u=function(b){b.preventDefault();let c=a.getParent("TR",b.target).dataset.archiveid;if(c>o.length||0>c)return;let d=e.querySelectorAll("tr");o.splice(c,1);let f=e.removeChild(d[c]);f.removeEventListener("click",u);for(let a=c;a<d.length;++a)--d[a].dataset.archiveid;D()},v=function(a,b){b.preventDefault();0===a.value.trim().length||(s(a.value.trim(),a),a.value="",a.focus(),a.scrollIntoView(!1),D())},w=function(a){if(a>n.length||0>a)return;let b=d.querySelectorAll("tr:not(.list-table__entry--new-todo)");n.splice(a,1);let c=d.removeChild(b[a]);c.querySelector("input").removeEventListener("change",x);let e=c.querySelector(".button--check");e.removeEventListener("click",y),e.removeEventListener("touchend",y);for(let c=a;c<b.length;++c)--b[c].dataset.todoid;D()},x=function(b){let c=a.getParent("TR",b.target);return 0===b.target.value.length?w(c.dataset.todoid):void(n[c.dataset.todoid].text=b.target.value,D())},y=function(b){a.getParent("TR",c).querySelector("input").blur(),b.target.focus(),b.preventDefault();let d=a.getParent("TR",b.target),e=d.querySelector("input");return d.dataset.cooldownarchiving?C(d):void(d.dataset.cooldownarchiving=!0,d.dataset.cooldowntime=k,d.dataset.todomessage=e.value,e.value="",e.placeholder=l+(parseInt(k)+1)+m,d.removeEventListener("change",x),d.addEventListener("mouseleave",z),d.addEventListener("archivetodo",B),"touchend"===b.type&&z(b))},z=function(b){b.preventDefault();let c=a.getParent("TR",b.target),d=c.querySelector("input");c.dataset.intervalid=setInterval(A,1e3,c,d),c.removeEventListener("mouseleave",z)},A=function(a,b){--a.dataset.cooldowntime,0>a.dataset.cooldowntime&&(a.dataset.cooldowntime=0,a.dispatchEvent(new CustomEvent("archivetodo",{detail:{todoid:a.dataset.todoid}})),clearInterval(a.dataset.intervalid)),b.placeholder=l+(parseInt(a.dataset.cooldowntime)+1)+m},B=function(a){let b=n[a.detail.todoid].text,c=n[a.detail.todoid].creationDate;w(a.detail.todoid),t(b,c),D()},C=function(a){let b=a.querySelector("input");a.removeEventListener("mouseleave",z),a.removeEventListener("archivetodo",B),a.addEventListener("change",x),a.dataset.intervalid&&(clearInterval(a.dataset.intervalid),delete a.dataset.intervalid),b.value=n[a.dataset.todoid].text,b.placeholder="",delete a.dataset.cooldownarchiving,delete a.dataset.cooldowntime,delete a.dataset.todomessage},D=function(){let a=[],b=[],c=d.querySelectorAll("tr"),f=e.querySelectorAll("tr");for(var g=0;g<c.length-1;g++){if(g==c[g].dataset.todoid){a[g]=n[g];continue}a[g]=n[c[g].dataset.todoid],c[g].dataset.todoid=g;let b=c[g].querySelector("input");b.id="todoEntry"+g;let d=c[g].querySelector("label");d.setAttribute("for",b.id),d.innerText="Text of ToDo "+(parseInt(g)+1)}for(var g=0;g<f.length;g++){if(g==f[g].dataset.archiveid){b[g]=o[g];continue}b[g]=o[f[g].dataset.archiveid],f[g].dataset.archiveid=g;let a=f[g].querySelector("input");a.id="archiveEntry"+g;let c=f[g].querySelector("label");c.setAttribute("for",a.id),c.innerText="Text of Archive "+(parseInt(g)+1)}localStorage.setItem("todos",JSON.stringify(a)),(j?sessionStorage:localStorage).setItem("archive",JSON.stringify(b)),F()},E=function(a){let b=JSON.parse(localStorage.getItem("todos"))||[],c=JSON.parse((j?sessionStorage:localStorage).getItem("archive"))||[],f=d.querySelectorAll("tr:not(.list-table__entry--new-todo)");f.forEach(a=>{a.parentElement.removeChild(a)});let g=e.querySelectorAll("tr");g.forEach(a=>{a.parentElement.removeChild(a)});for(let c=0;c<b.length;++c)s(b[c].text,a,b[c].creationDate);for(let b=0;b<c.length;++b)t(c[b].text,c[b].creationDate,c[b].finishedDate);F()},F=function(){h.innerText=n.length,i.innerText=o.length};return function(){let a=c.parentElement.parentElement.querySelector("input"),b=v.bind(null,a);c.addEventListener("click",b),a.addEventListener("keyup",a=>{13!=a.keyCode||b(a)}),E(a),p.startup(),q.startup(),d.addEventListener("sortableUpdate",()=>{D()}),e.addEventListener("sortableUpdate",()=>{D()})}()}}),requirejs(["collapsible","todo"],function(a,b){let c=document.getElementById("add-todo"),d=document.getElementsByClassName("list-table__body--todo")[0],e=document.getElementsByClassName("list-table__body--archive")[0],f=document.getElementById("todoTemplate"),g=document.getElementById("archiveTemplate"),h=document.getElementById("totalArchive"),i=document.getElementById("totalTodo");b(c,d,e,f,g,i,h);let j=a("button--collapsible-controller","list-table__body--collapsed");j.startup()}),define("main",function(){});